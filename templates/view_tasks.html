<!DOCTYPE html>
<html>
<head><title>View Tasks</title><link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<nav>
  <a href="{{ url_for('home') }}">Home</a> |
  <a href="{{ url_for('add_task') }}">Add Task</a> |
  <a href="{{ url_for('view_tasks') }}">View Tasks</a> |
  <a href="{{ url_for('mood_stats') }}">Mood Stats</a> |
  <a href="{{ url_for('completed_tasks_page') }}">Completed Tasks</a> |
  <a href="{{ url_for('about') }}">About</a> |
  <a href="{{ url_for('profile') }}">Profile</a> |
  <a href="{{ url_for('settings') }}">Settings</a> |
  <a href="{{ url_for('help') }}">Help</a> |
  <a href="{{ url_for('contact') }}">Contact</a>
</nav>
<hr>
s
  <h1>Tasks</h1>

  <form method="get" action="{{ url_for('view_tasks') }}">
    <label>Filter by mood:</label>
    <select name="mood" onchange="this.form.submit()">
      <option value="">All</option>
      <option value="happy" {% if request.args.get('mood')=='happy' %}selected{% endif %}>Happy</option>
      <option value="tired" {% if request.args.get('mood')=='tired' %}selected{% endif %}>Tired</option>
      <option value="stressed" {% if request.args.get('mood')=='stressed' %}selected{% endif %}>Stressed</option>
      <option value="neutral" {% if request.args.get('mood')=='neutral' %}selected{% endif %}>Neutral</option>
    </select>
  </form>

  <ul>
    {% for task in tasks %}
      <li>
        {{ task.text }} ({{ task.mood }}) 
        <a href="{{ url_for('edit_task', task_id=task.id) }}">Edit</a> | 
        <a href="{{ url_for('delete_task', task_id=task.id) }}">Delete</a><!-- Add this form/button to mark task completed -->
      <form method="post" action="{{ url_for('complete_tasks', task_id=task.id) }}" style="display:inline;">
        <button type="submit">Mark Completed</button>
      </form>
      </li>
    {% else %}
      <li>No tasks found.</li>
    {% endfor %}
  </ul>
</body>
</html>
